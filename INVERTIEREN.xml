<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC
    "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN"
    "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">
<head>
  <title>Invertieren einer Matrix</title>
  <style type="text/css"> 
body { font-size:100%; }
textarea { font-family: Courier,monospace; font-size: 100%; }

h0 { display: inline-flex; align-items: flex-start; font-family: Courier,monospace; font-size: 100%; margin-top: 15px; }
ha { display: flex; align-items: center; font-family: Courier,monospace; font-size: 100%; margin-top: 15px; }
hb { display: flex; align-items: center; border-left:solid; border-right:solid; border-radius: 15px; border-color: Maroon; padding: 4px; background-color: LightYellow; }
hc { display: flex; }
hd { display: flex; border-left:solid; border-right:solid; border-radius: 10px; padding: 4px; border-color: dimgrey; background-color: WhiteSmoke; }
he { display: flex; }
hf { display: flex; flex-direction: column; align-items: center; border:solid; border-radius: 10px; padding: 4px; }
hg { display: flex; border:solid; border-radius: 10px; padding: 4px; }
hh { display: flex; flex-direction: row-reverse; padding: 0px; background-color: lightgrey; margin: 2px; border-radius: 4px; min-width: 1.5em; }
hi { display: flex; flex-direction: column; align-items: stretch; }
hj { display: flex; padding: 4px; }
hv { display: flex; flex-direction: row-reverse; padding: 0px; background-color: Bisque; margin: 2px; border-radius: 4px; min-width: 1.5em; }
hw { display: flex; flex-direction: row-reverse; padding: 0px; background-color: Thistle; margin: 2px; border-radius: 4px; min-width: 1.5em; }

c0 { border-radius: 5px; background-color: lightgreen; }
c1 { border-radius: 5px; background-color: HotPink; }
c2 { border-radius: 5px; background-color: aqua; }
c3 { border-radius: 5px; background-color: yellow; }
    </style> 
<script type="application/ecmascript">
<![CDATA[
function invertieren() {
  event.preventDefault();
  A=eval(document.getElementById("matrix input").value);
  AMERK=eval(document.getElementById("matrix input").value);
  PRO=eval(document.getElementById("matrix input").value);
  body=document.getElementsByTagName("body")[0];
  body.removeChild(body.lastChild);
  body.removeChild(body.lastChild);
  Ergebnis=document.createElement("div");body.appendChild(Ergebnis);
  Probe=document.createElement("div");body.appendChild(Probe);
  Ausgangsmatrix=document.getElementById("Ausgangsmatrix");
  n=A.length;
  NeuerNenner=1;NMERK=NeuerNenner;
  Ausgangsmatrix.removeChild(Ausgangsmatrix.lastChild);
  ha = document.createElement("ha");Ausgangsmatrix.appendChild(ha);
  EDISP(ha,0,true);
  hap = document.createElement("ha");Probe.appendChild(hap);
  hap.appendChild(document.createTextNode("Probe: "));
  EDISP(hap,0,false);
  hap.appendChild(document.createTextNode(" · "));
  for (i=0;i<n;i++) {
    //alert("i="+i);
    AlterNenner=NeuerNenner;
    NeuerNenner=A[i][i];Y=[];Z=[];
    for (j=0;j<n;j++) {
      Y[j]=A[j][i];
      Z[j]=A[i][j];
      }
    Y[i]=Y[i]+AlterNenner;
    Z[i]=Z[i]-AlterNenner;
    ADISP(Ergebnis,i);
    for (j=0;j<n;j++) { for (k=0;k<n;k++) { 
      A[j][k]=(A[j][k]*NeuerNenner-Y[j]*Z[k])/AlterNenner;
      } }
    EDISP(ha,i+1,true);
    //alert("i="+i+"\nNeuerNenner="+NeuerNenner+" AlterNenner="+AlterNenner+"\nY="+Y+"\nZ="+Z+"\nA=("+A+")/"+NeuerNenner);
    }
  EDISP(hap,n,false);
  hap.appendChild(document.createTextNode(" = "));
  alert(A+"#"+AMERK+"#"+PRO);
  for (i=0;i<n;i++) { for (j=0;j<n;j++) { 
    PRO[i][j]=0;
    for (k=0;k<n;k++) { 
      PRO[i][j]=PRO[i][j]+A[i][k]*AMERK[k][j];
      } 
    PRO[i][j]=PRO[i][j]/NeuerNenner;
    } }
  A=PRO;
  EDISP(hap,n,2);
  alert(A+"#"+AMERK+"#"+PRO);
  }

function ADISP(Ergebnis,i) {
  ck = document.createElement("c"+eval((i+1)%4));
    t = document.createTextNode(NeuerNenner);ck.appendChild(t);   
  cl = document.createElement("c"+eval(i%4));
    t = document.createTextNode(AlterNenner);cl.appendChild(t);   
  ha = document.createElement("ha");Ergebnis.appendChild(ha);
    hb = document.createElement("hb");ha.appendChild(hb);
      hd = document.createElement("hd");hb.appendChild(hd);
        for (k=0;k<n;k++) { 
          hi = document.createElement("hi");hd.appendChild(hi);
          for (j=0;j<n;j++) { 
            if (j==i & k==i | k!=i & j!=i) { 
              hh = document.createElement("hh") } 
            if (j==i & k!=i ) {
               hh = document.createElement("hw") }
            if (k==i & j!=i ) {
               hh = document.createElement("hv") }
            hi.appendChild(hh);
            if (j==i & k==i) {
              ci = document.createElement("c"+eval((i+1)%4));
              hh.appendChild(ci);hh=ci; }
            t = document.createTextNode(A[j][k]);hh.appendChild(t);
          } }
      hj = document.createElement("hj");hb.appendChild(hj);
       t = document.createTextNode("·");hj.appendChild(t);
      hc = document.createElement("hc");hb.appendChild(hc);
        hc.appendChild(ck.cloneNode(true));
      hj = document.createElement("hj");hb.appendChild(hj);
       t = document.createTextNode("-");hj.appendChild(t);
      hd = document.createElement("hd");hb.appendChild(hd);
        hi = document.createElement("hi");hd.appendChild(hi);
        for (j=0;j<n;j++) { 
          if (j==i) {
            hh = document.createElement("hh");hi.appendChild(hh);
            hh.appendChild(cl.cloneNode(true));
            t = document.createTextNode("+");
            hh.appendChild(t);hh.appendChild(ck.cloneNode(true));
            } else {
              hh = document.createElement("hv");hi.appendChild(hh);
              t = document.createTextNode(A[j][i]) 
              hh.appendChild(t);
              };
          }
      hj = document.createElement("hj");hb.appendChild(hj);
       t = document.createTextNode("·");hj.appendChild(t);
      hd = document.createElement("hd");hb.appendChild(hd);
        for (k=0;k<n;k++) { 
          if (k==i) {
            hh = document.createElement("hh");hd.appendChild(hh);
            hh.appendChild(cl.cloneNode(true));
            t = document.createTextNode("-");
            hh.appendChild(t);hh.appendChild(ck.cloneNode(true));
            }
            else {
              hh = document.createElement("hw");hd.appendChild(hh);
              t = document.createTextNode(A[i][k]);
              hh.appendChild(t); };
          }
    hj = document.createElement("hj");ha.appendChild(hj);
     t = document.createTextNode(":");hj.appendChild(t);
    hc = document.createElement("hc");ha.appendChild(hc);
      hc.appendChild(cl.cloneNode(true));
    hj = document.createElement("hj");ha.appendChild(hj);
     t = document.createTextNode(":");hj.appendChild(t);
    hc = document.createElement("hc");ha.appendChild(hc);
      hc.appendChild(ck.cloneNode(true));
  }

function EDISP(ha,i,T) {
  if (T==1) {
    hj = document.createElement("hj");ha.appendChild(hj);
      t = document.createTextNode("=");hj.appendChild(t);
    }
  hd = document.createElement("hd");ha.appendChild(hd);
    for (k=0;k<n;k++) {
      hi = document.createElement("hi");hd.appendChild(hi);
      for (j=0;j<n;j++) { 
        hh = document.createElement("hh");hi.appendChild(hh);
        t = document.createTextNode(A[j][k]);hh.appendChild(t);
      } }
  if (T<2) {
    hj = document.createElement("hj");ha.appendChild(hj);
     t = document.createTextNode(":");hj.appendChild(t);
    hc = document.createElement("hc");ha.appendChild(hc);
      ci = document.createElement("c"+eval(i%4));hc.appendChild(ci);
        t = document.createTextNode(NeuerNenner);ci.appendChild(t);
    }
  }

  ]]>
</script>
  </head>
<body onload="invertieren()">
<h0 id="Ausgangsmatrix">
<textarea id="matrix input" cols="40" rows="10" >[ [ 1, 1, 1, 1 ],
  [ 2, 4, 8, 16 ],
  [ 3, 9, 27, 81 ],
  [ 4, 16, 64, 256 ] ]
</textarea>
<ha /></h0>
<button id="invertieren" class="butbut" onclick="doSend7()" ontouchstart="invertieren()">die geänderte Eingabematrix invertieren</button>
<!--
<textarea id="matrix input" cols="20" rows="10" >[ [ 2, 2 ],
  [ 4, 8 ] ]
</textarea>
-->
<div id="Ergebnis" />
<div id="Probe" />
</body>
</html>
