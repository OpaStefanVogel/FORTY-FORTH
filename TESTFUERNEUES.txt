HEX ( ist noch als einzigstes zurückzustellen zum Programmieren )
1800 ERGEBNIS ! ( etwas vorrücken inzwischen, wieder 3h gesucht deswegen

TLISTENZEIGER ?
ENTFERNE L-AUSLES
ENTFERNE O-AUSLES
TLISTENZEIGER ?
IAM1X ? IAM1Y ? IAM2X ? IAM2Y ?
-1 IAM1X ! -1 IAM1Y ! -1 IAM2X ! -1 IAM2Y ! 


: R-ABSCHICKEN ( x y n op --> )
  2OVER >R >R
  BEGIN RECHTS-ANGEKOMMEN @ RECHTS-MERK @ = UNTIL
  RECHTS-BYTES
  SWAP OVER ! 1+ SWAP >R SWAP >R
  SWAP OVER ! 1+ R> OVER ! 1+ R> SWAP !
  RECHTS-ANGEKOMMEN @ NOT 1 AND RECHTS-MERK !
  RECHTS-ANGEKOMMEN @ NOT RECHTS-ABGESCHICKT !
  CR R> . R> . ." r-abgeschickt"
  ;
: U-ABSCHICKEN ( x y n op --> )
  2OVER >R >R
  BEGIN UNTEN-ANGEKOMMEN @ UNTEN-MERK @ = UNTIL
  UNTEN-BYTES
  SWAP OVER ! 1+ SWAP >R SWAP >R
  SWAP OVER ! 1+ R> OVER ! 1+ R> SWAP !
  UNTEN-ANGEKOMMEN @ NOT 1 AND UNTEN-MERK !
  UNTEN-ANGEKOMMEN @ NOT UNTEN-ABGESCHICKT !
  CR R> . R> . ." u-abgeschickt"
  ;


: XY-PROC ( x y --> )
  CR ." XY " OVER . DUP .
  OVER IAM2X @ LT OVER IAM2Y @ LT AND IF -1 IAM1X ! -1 IAM1Y ! -1 IAM2X ! -1 IAM2Y ! END_IF
  OVER IAM1X @ = NOT IAM2X @ -1 = AND IF 
    IAM1X @ -1 = IF OVER IAM1X ! ELSE OVER IAM2X ! END_IF
    CR IAM1X ? IAM1Y ? IAM2X ? IAM2Y ?
    OVER 1+ OVER 0 0 U-ABSCHICKEN
    END_IF
  DUP IAM1Y @ = NOT IAM2Y @ -1 = AND IF 
    IAM1Y @ -1 = IF DUP IAM1Y ! ELSE DUP IAM2Y ! END_IF
    CR IAM1X ? IAM1Y ? IAM2X ? IAM2Y ?
    OVER OVER 1+ 0 0 R-ABSCHICKEN
    END_IF
  2DROP ;

: L-AUSLES
  LINKS-MERK @ LINKS-ABGESCHICKT @ = NOT IF
    LINKS-BYTES @ 0= IF 
      LINKS-BYTES 1+ DUP @ SWAP 1+ @ 
      LINKS-ABGESCHICKT @ LINKS-MERK !
      LINKS-ABGESCHICKT @ LINKS-ANGEKOMMEN !
      XY-PROC END_IF
    END_IF
  ;

: O-AUSLES
  OBEN-MERK @ OBEN-ABGESCHICKT @ = NOT IF
    OBEN-BYTES @ 0= IF 
      OBEN-BYTES 1+ DUP @ SWAP 1+ @ 
      OBEN-ABGESCHICKT @ OBEN-MERK !
      OBEN-ABGESCHICKT @ OBEN-ANGEKOMMEN !
      XY-PROC END_IF
    END_IF
  ;


TLISTENZEIGER ?
BEFESTIGE L-AUSLES
BEFESTIGE O-AUSLES
TLISTENZEIGER ?
HERE . BZEIG ?


IAM1X ? IAM1Y ? IAM2X ? IAM2Y ?
-1 IAM1X ! -1 IAM1Y ! -1 IAM2X ! -1 IAM2Y ! 

0 0 XY-PROC 

